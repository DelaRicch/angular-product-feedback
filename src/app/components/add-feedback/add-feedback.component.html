<div class="mx-auto px-5 flex w-full flex-col gap-20 sm:w-[33rem] overflow-hidden">
  <app-go-back-button />
  <form
  [formGroup]="formGroup"
(submit)="addFeedback($event)"
    class="relative flex flex-col gap-6 rounded-md bg-white px-4 sm:px-8 pb-6 pt-10"
  >
    <div class="absolute -top-8">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="56"
        height="56"
        viewBox="0 0 56 56"
        fill="none"
      >
        <circle cx="28" cy="28" r="28" fill="url(#paint0_radial_0_2017)" />
        <path
          d="M30.3425 36V30.1657H36.0295V25.8637H30.3425V20H25.7459V25.8637H20V30.1657H25.7459V36H30.3425Z"
          fill="white"
        />
        <defs>
          <radialGradient
            id="paint0_radial_0_2017"
            cx="0"
            cy="0"
            r="1"
            gradientUnits="userSpaceOnUse"
            gradientTransform="translate(58.184 -5.81647) rotate(129.411) scale(93.4169)"
          >
            <stop stop-color="#E84D70" />
            <stop offset="0.530886" stop-color="#A337F6" />
            <stop offset="1" stop-color="#28A7ED" />
          </radialGradient>
        </defs>
      </svg>
    </div>
    <span class="text-lg sm:text-2xl font-bold capitalize text-[#3A4374]"
      >create new feedback</span
    >
    <div class="flex flex-col gap-6">
        <app-input [control]="formGroup.controls.title" title="Feedback Title" description="Add a short, descriptive headline" />
        <div class="relative flex flex-col">
            <div class="flex flex-col mb-4">
                <span class="text-[#3A4374] font-bold text-sm">Category</span>
                <p class="text-gray text-sm">Choose a category for your feedback</p>
            </div>
            <app-button 
            [value]="displayFeatures"
            (onClick)="toggleDisplayFeatures($event)"
            backgroundColor="#F7F8FD"
            color="#3A4374"
            buttonClass="font-normal">
                <div class="flex items-center justify-between">
                    <span class="capitalize">{{selectedCategory}}</span>
                    <svg class="transition-all duration-300 ease-linear" [class]="displayFeatures ? 'transform rotate-180' : '' " xmlns="http://www.w3.org/2000/svg" width="10" height="7" viewBox="0 0 10 7" fill="none">
                        <path d="M1 1L5 5L9 1" stroke="#4661E6" stroke-width="2"/>
                    </svg>
                </div>
            </app-button>
            @if(displayFeatures) {
                <div class="absolute bg-white w-full top-28 z-40">
                    <app-dropdown [selectedItem]="selectedCategory" (onClick)="selectCategory($event)" [dropdownItems]="categories" />
                </div>
            }
        </div>
            <app-input [control]="formGroup.controls.feedback" type="textarea" title="Feedback Detail" description="Include any specific comments on what should be improved, added, etc." />

        <div class="flex flex-col sm:flex-row sm:justify-end gap-4">
            <app-button (onClick)="cancelFeedBack($event)" backgroundColor="#3A4374">
               Cancel 
            </app-button>
            <app-button [disabled]="formGroup.invalid || isSubmitting" [type]="ButtonType.Submit" backgroundColor="#AD1FEA">
              @if (isSubmitting) {
                <span>
                  <i class="fa fa-spinner fa-spin"></i> Submitting...
                </span>
              }
              @else {
                <span>Add Feedback</span>
              }
             </app-button>
        </div>
    </div>
  </form>
</div>
